CREATE TABLE IF NOT EXISTS `cars` (`id_car` INTEGER auto_increment , `licencePlate` VARCHAR(255), `make` VARCHAR(255), `model` VARCHAR(255), `capacity` INTEGER, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id_car`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `users` (`id_user` INTEGER auto_increment , `firstName` VARCHAR(255), `lastName` VARCHAR(255), `username` VARCHAR(255) UNIQUE, `email` VARCHAR(255), `password` VARCHAR(255), `address` VARCHAR(255), `city` VARCHAR(255), `cp` VARCHAR(255), `phone` VARCHAR(255), `privilege` INTEGER, `is_driver` TINYINT(1), `revoked` TINYINT(1) DEFAULT false, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `id_car` INTEGER, PRIMARY KEY (`id_user`), FOREIGN KEY (`id_car`) REFERENCES `cars` (`id_car`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `journeys` (`id_journey` INTEGER auto_increment , `origin` VARCHAR(255), `destination` VARCHAR(255), `seats_available` INTEGER, `date_journey` DATETIME, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `id_driver` INTEGER, PRIMARY KEY (`id_journey`), FOREIGN KEY (`id_driver`) REFERENCES `users` (`id_user`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `participations` (`id_participation` INTEGER auto_increment , `note` INTEGER, `comment` VARCHAR(255), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `id_driver` INTEGER, `id_journey` INTEGER, PRIMARY KEY (`id_participation`), FOREIGN KEY (`id_driver`) REFERENCES `users` (`id_user`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`id_journey`) REFERENCES `journeys` (`id_journey`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `chats` (`id` INTEGER auto_increment , `message` VARCHAR(255), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `id_auteur` INTEGER, `id_trajet` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`id_auteur`) REFERENCES `users` (`id_user`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`id_trajet`) REFERENCES `journeys` (`id_journey`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;

